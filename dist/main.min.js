!function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.localStore=t()}(function(){"use strict";function t(t){return JSON.stringify(t)}function e(t){try{return JSON.parse(t)}catch(e){}}var n=window.localStorage,o=function(){for(var t=window.requestAnimationFrame,e="ms o moz webkit".split(" "),n=e.length;!t&&--n>-1;)t=window[e[n]+"RequestAnimationFrame"];return t||window.setImmediate||window.setTimeout}();return{clear:function(){o(function(){n.clear()})},setItem:function(e,i,r,u){var f={v:i};"function"==typeof r&&(u=r,r=void 0),r>0&&(f.t=Date.now()+r),o(function(){try{n.setItem(e,t(f))}catch(o){u&&u(o)}})},getItem:function(t,i){o(function(){var o,r,u;o=n.getItem(t),o&&(o=e(o))&&(r=o.v,u=o.t,"undefined"!=typeof u&&Date.now()>=u&&(r=null,n.removeItem(t))),i("undefined"==typeof r?null:r)})},removeItem:function(t){o(function(){t.split(" ").forEach(function(t){n.removeItem(t)})})},key:function(t){return n.key(t)},getLength:function(){return n.length}}});