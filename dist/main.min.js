!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e(t):t.localStore=e(t)}(window,function(t){"use strict";function e(t){return JSON.stringify(t)}function n(t){try{return JSON.parse(t)}catch(e){}}var o=t.localStorage,i=function(){for(var e=t.requestAnimationFrame,n="ms o moz webkit".split(" "),o=n.length;!e&&--o>-1;)e=t[n[o]+"RequestAnimationFrame"];return e||t.setImmediate||t.setTimeout}();return{clear:function(){i(function(){o.clear()})},setItem:function(t,n,r,u){var f={v:n};"function"==typeof r&&(u=r,r=void 0),r>0&&(f.t=Date.now()+r),i(function(){try{o.setItem(t,e(f))}catch(n){u&&u(n)}})},getItem:function(t,e){i(function(){var i,r,u;i=o.getItem(t),i&&(i=n(i))&&(r=i.v,u=i.t,"undefined"!=typeof u&&Date.now()>=u&&(r=null,o.removeItem(t))),e("undefined"==typeof r?null:r)})},removeItem:function(t){i(function(){t.split(" ").forEach(function(t){o.removeItem(t)})})},key:function(t){return o.key(t)},getLength:function(){return o.length}}});